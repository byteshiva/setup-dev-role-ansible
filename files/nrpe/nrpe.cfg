##############################################################################
# Sample NRPE Config File 
# Written by: KORE - IT
# Customised by 
#
# NOTES:
# This is a customised configuration file for the NRPE daemon meant for DSB.  It needs to be
# located on the remote host that is running the NRPE daemon, not the host
# from which the check_nrpe client is being executed.
#############################################################################


# LOG FACILITY
# The syslog facility that should be used for logging purposes.

log_facility=daemon



# PID FILE
# The name of the file in which the NRPE daemon should write it's process ID
# number.  The file is only written if the NRPE daemon is started by the root
# user and is running in standalone mode.

pid_file=/var/run/nrpe.pid



# PORT NUMBER
# Port number we should wait for connections on.
# NOTE: This must be a non-priviledged port (i.e. > 1024).
# NOTE: This option is ignored if NRPE is running under either inetd or xinetd

server_port=5666



# SERVER ADDRESS
# Address that nrpe should bind to in case there are more than one interface
# and you do not want nrpe to bind on all interfaces.
# NOTE: This option is ignored if NRPE is running under either inetd or xinetd

#server_address=127.0.0.1



# NRPE USER
# This determines the effective user that the NRPE daemon should run as.  
# You can either supply a username or a UID.
# 
# NOTE: This option is ignored if NRPE is running under either inetd or xinetd

nrpe_user=nrpe



# NRPE GROUP
# This determines the effective group that the NRPE daemon should run as.  
# You can either supply a group name or a GID.
# 
# NOTE: This option is ignored if NRPE is running under either inetd or xinetd

nrpe_group=nrpe



# ALLOWED HOST ADDRESSES
# This is an optional comma-delimited list of IP address or hostnames 
# that are allowed to talk to the NRPE daemon. Network addresses with a bit mask
# (i.e. 192.168.1.0/24) are also supported. Hostname wildcards are not currently 
# supported.
#
# Note: The daemon only does rudimentary checking of the client's IP
# address.  I would highly recommend adding entries in your /etc/hosts.allow
# file to allow only the specified host to connect to the port
# you are running this daemon on.
#
# NOTE: This option is ignored if NRPE is running under either inetd or xinetd

allowed_hosts=127.0.0.1,chef-monit-vpc1.kore-aws.com,icinga-vpc.kore-aws.com,10.0.29.246,10.0.20.207,10.0.22.114
 


# COMMAND ARGUMENT PROCESSING
# This option determines whether or not the NRPE daemon will allow clients
# to specify arguments to commands that are executed.  This option only works
# if the daemon was configured with the --enable-command-args configure script
# option.  
#
# *** ENABLING THIS OPTION IS A SECURITY RISK! *** 
# Read the SECURITY file for information on some of the security implications
# of enabling this variable.
#
# Values: 0=do not allow arguments, 1=allow command arguments

dont_blame_nrpe=0



# COMMAND PREFIX
# This option allows you to prefix all commands with a user-defined string.
# A space is automatically added between the specified prefix string and the
# command line from the command definition.
#
# *** THIS EXAMPLE MAY POSE A POTENTIAL SECURITY RISK, SO USE WITH CAUTION! ***
# Usage scenario: 
# Execute restricted commmands using sudo.  For this to work, you need to add
# the nagios user to your /etc/sudoers.  An example entry for alllowing 
# execution of the plugins from might be:
#
# nagios          ALL=(ALL) NOPASSWD: /usr/lib/nagios/plugins/
#
# This lets the nagios user run all commands in that directory (and only them)
# without asking for a password.  If you do this, make sure you don't give
# random users write access to that directory or its contents!

# command_prefix=/usr/bin/sudo 



# DEBUGGING OPTION
# This option determines whether or not debugging messages are logged to the
# syslog facility.
# Values: 0=debugging off, 1=debugging on

debug=0



# COMMAND TIMEOUT
# This specifies the maximum number of seconds that the NRPE daemon will
# allow plugins to finish executing before killing them off.

command_timeout=60



# CONNECTION TIMEOUT
# This specifies the maximum number of seconds that the NRPE daemon will
# wait for a connection to be established before exiting. This is sometimes
# seen where a network problem stops the SSL being established even though
# all network sessions are connected. This causes the nrpe daemons to
# accumulate, eating system resources. Do not set this too low.

connection_timeout=300



# WEEK RANDOM SEED OPTION
# This directive allows you to use SSL even if your system does not have
# a /dev/random or /dev/urandom (on purpose or because the necessary patches
# were not applied). The random number generator will be seeded from a file
# which is either a file pointed to by the environment valiable $RANDFILE
# or $HOME/.rnd. If neither exists, the pseudo random number generator will
# be initialized and a warning will be issued.
# Values: 0=only seed from /dev/[u]random, 1=also seed from weak randomness

#allow_weak_random_seed=1



# INCLUDE CONFIG FILE
# This directive allows you to include definitions from an external config file.

#include=<somefile.cfg>



# INCLUDE CONFIG DIRECTORY
# This directive allows you to include definitions from config files (with a
# .cfg extension) in one or more directories (with recursion).

#include_dir=<somedirectory>
#include_dir=<someotherdirectory>



# COMMAND DEFINITIONS
# Command definitions that this daemon will run.  Definitions
# are in the following format:
#
# command[<command_name>]=<command_line>
#
# When the daemon receives a request to return the results of <command_name>
# it will execute the command specified by the <command_line> argument.
#
# Unlike Nagios, the command line cannot contain macros - it must be
# typed exactly as it should be executed.
#
# Note: Any plugins that are used in the command lines must reside
# on the machine that this daemon is running on!  The examples below
# assume that you have plugins installed in a /usr/local/nagios/libexec
# directory.  Also note that you will have to modify the definitions below
# to match the argument format the plugins expect.  Remember, these are
# examples only!


# The following examples use hardcoded command arguments...
#
## Common Checks
command[check_users]=/usr/lib64/nagios/plugins/check_users -w 5 -c 10
command[check_load]=/usr/lib64/nagios/plugins/check_load -w 5,4,3 -c 10,8,6
command[check_hda1]=/usr/lib64/nagios/plugins/check_disk -w 20% -c 10% -p /dev/xvda1
command[check_total_procs]=/usr/lib64/nagios/plugins/check_procs -w 150 -c 200
command[check_ssh]=/usr/lib64/nagios/plugins/check_ssh -p 22 localhost
command[check_memory]=/usr/lib64/nagios/plugins/check_memory.pl -w 10 -c 5 -f -C
command[check_volume]=/usr/lib64/nagios/plugins/check_disk -w 20% -c 10% -p /dev/xvdm
command[check_openconns]=/usr/lib64/nagios/plugins/check_openconn 1500 1800
command[check_httpconns]=/usr/lib64/nagios/plugins/check_httpconn 40 50
command[check_networkio]=/usr/bin/perl /usr/lib64/nagios/plugins/stat_net.pl
command[check_iostat]=/usr/lib64/nagios/plugins/check_iostat.sh -d xvda -w 100,100,100 -c 200,200,200
command[check_iostat_xvdm]=/usr/lib64/nagios/plugins/check_iostat.sh -d xvdm -w 100,100,100 -c 200,200,200
command[check_iostat_xvdn]=/usr/lib64/nagios/plugins/check_iostat.sh -d xvdn -w 100,100,100 -c 200,200,200
command[check_iostat_xvdb]=/usr/lib64/nagios/plugins/check_iostat.sh -d xvdb -w 100,100,100 -c 200,200,200
command[check_iostat_xvdc]=/usr/lib64/nagios/plugins/check_iostat.sh -d xvdc -w 100,100,100 -c 200,200,200
command[check_localvolume1]=/usr/lib64/nagios/plugins/check_disk -w 20% -c 10% -p /dev/xvdg
command[check_glustervolume]=/usr/lib64/nagios/plugins/check_disk -w 20% -c 10% -p /mnt/gv0
command[check_diskio]=/usr/lib64/nagios/plugins/check_diskstat.sh -d xvda -W 10 -C 20
command[check_cpu_stats]=/usr/lib64/nagios/plugins/check_cpu_stats.sh -w 75,75,75 -c 95,95,95
command[check_rootvolume]=/usr/lib64/nagios/plugins/check_disk -w 20% -c 10% -p /
command[check_usrvolume]=/usr/lib64/nagios/plugins/check_disk -w 20% -c 10% -p /usr
command[check_datavolume]=/usr/lib64/nagios/plugins/check_disk -w 20% -c 10% -p /data
command[check_datavolume1]=/usr/lib64/nagios/plugins/check_disk -w 20% -c 10% -p /data1
command[check_datavolume2]=/usr/lib64/nagios/plugins/check_disk -w 20% -c 10% -p /data2
command[check_backupvolume]=/usr/lib64/nagios/plugins/check_disk -w 20% -c 10% -p /backup
command[check_backupsvolume]=/usr/lib64/nagios/plugins/check_disk -w 20% -c 10% -p /backups
command[check_homevolume]=/usr/lib64/nagios/plugins/check_disk -w 20% -c 10% -p /home
command[check_chef-client_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [c]hef-client 70 90
command[check_chef-client_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [c]hef-client 70 90

## Stack Monitoring

command[check_logstashshipper]=/usr/lib64/nagios/plugins/check-logstashshipper
command[check_kms_stats]=sudo /usr/lib64/nagios/plugins/javastats [K]MS
command[check_kms_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [K]MS 70 90
command[check_kms_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [K]MS 70 90
command[check_wowzamanager]=sudo /usr/lib64/nagios/plugins/javastats [W]MSManager.war
command[check_wowza]=sudo /usr/lib64/nagios/plugins/javastats [w]ms-bootstrap.jar
command[check_logstashindexer]=sudo /usr/lib64/nagios/plugins/javastats [l]ogstash
command[check_Redis_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [r]edis-server 70 90
command[check_Redis_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [r]edis-server 70 90
command[check_redis_llen]=/usr/lib64/nagios/plugins/redis-llen.sh localhost 6379 nginxlogs -w 100 -c 1000
command[check_redis_applogs]=/usr/lib64/nagios/plugins/redis-llen.sh localhost 6379 applogs -w 100 -c 1000
command[check_redis_securitylogs]=/usr/lib64/nagios/plugins/redis-llen.sh localhost 6379 securitylogs -w 100 -c 1000
command[check_redis_usagelogs]=/usr/lib64/nagios/plugins/redis-llen.sh localhost 6379 usagelogs -w 100 -c 1000
command[check_presencelog]=/usr/lib64/nagios/plugins/check_presencelog 5 10
command[check_esjava]=/usr/lib64/nagios/plugins/esstats
command[check_logstashshipper]=/usr/lib64/nagios/plugins/check-logstashshipper
command[check_elasticsearch_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [e]lasticsearch 85 90
command[check_elasticsearch_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [e]lasticsearch 85 90
command[check_logstashindexer_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [l]ogstash 70 90
command[check_logstashindexer_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [l]ogstash 70 90
command[check_logstash]=sudo /usr/lib64/nagios/plugins/javastats  [l]ogstash

## Monitoring Memory/CPU Usage of Services

command[check_ADSyncServer_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [A]DSyncServer.js 70 90
command[check_ADSyncServer_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [A]DSyncServer.js 70 90
command[check_Aggregator_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [A]ggregator.js 70 90
command[check_Aggregator_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [A]ggregator.js 70 90
command[check_AlertRouter_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [A]lertRouter.js 70 90
command[check_AlertRouter_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [A]lertRouter.js 70 90
command[check_ApplicationServer_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [A]pplicationServer.js 70 90
command[check_ApplicationServer_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [A]pplicationServer.js 70 90
command[check_AuthServer_mem]=sh /usr/lib64/nagios/plugins/check_mem_process [A]uthServer.js 70 90
command[check_AuthServer_cpu]=sh /usr/lib64/nagios/plugins/check_cpu_process [A]uthServer.js 70 90
command[check_BillingServer_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [B]illingServer.js 70 90
command[check_BillingServer_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [B]illingServer.js 70 90
command[check_BotAdminJobServer_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [B]otAdminJobServer.js 70 90
command[check_BotAdminJobServer_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [B]otAdminJobServer.js 70 90
command[check_BotRTMServer_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [i]ndex.js 70 90
command[check_BotRTMServer_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [i]ndex.js 70 90
command[check_BotRTMJobServer_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [i]ndex.js 70 90
command[check_BotRTMJobServer_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [i]ndex.js 70 90
command[check_BotsService_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [B]otsService.js 70 90
command[check_BotsService_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [B]otsService.js 70 90
command[check_Builder_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [a]pp.js 70 90
command[check_Builder_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [a]pp.js 70 90
command[check_ChatScript_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [C]hatScript 70 90
command[check_ChatScript_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [C]hatScript 70 90
command[check_DataArchiveServer_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [D]ataArchiveServer.js 70 90
command[check_DataArchiveServer_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [D]ataArchiveServer.js 70 90
command[check_EmailServer_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [E]mailServer.js 70 90
command[check_EmailServer_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [E]mailServer.js 70 90
command[check_EncryptionServer_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [E]ncryptionServer.js 70 90
command[check_EncryptionServer_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [E]ncryptionServer.js 70 90
command[check_EventGenerator_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [E]ventGenerator.js 70 90
command[check_EventGenerator_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [E]ventGenerator.js 70 90
command[check_Haraka_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [h]arakaService 70 90
command[check_Haraka_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [h]arakaService 70 90
command[check_Idproxy_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [I]dProxyServer.js 70 90
command[check_Idproxy_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [I]dProxyServer.js 70 90
command[check_JobServer_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [J]obServer.js 70 90
command[check_JobServer_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [J]obServer.js 70 90
command[check_KeyServer_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [K]eyServer 70 90
command[check_KeyServer_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [K]eyServer 70 90
command[check_MessageScehdulerServer_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [M]essageScehdulerServer.js 70 90
command[check_MessageScehdulerServer_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [M]essageScehdulerServer.js 70 90
command[check_nginx_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [n]ginx 70 90
command[check_nginx_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [n]ginx 70 90
command[check_NurturingEmailsServer_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [N]urturingEmailsServer 70 90
command[check_NurturingEmailsServer_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [N]urturingEmailsServer 70 90
command[check_PollServer_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [P]ollServer.js 70 90
command[check_PollServer_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [P]ollServer.js 70 90
command[check_PresenceServer_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [P]resenceServer.js 70 90
command[check_PresenceServer_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [P]resenceServer.js 70 90
command[check_ResolverServer_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [R]esolverServer.js 70 90
command[check_ResolverServer_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [R]esolverServer.js 70 90
command[check_ResourceResolverServer_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [R]esourceResolverServer.js 70 90
command[check_ResourceResolverServer_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [R]esourceResolverServer.js 70 90
command[check_RetentionServer_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [R]etentionServer.js 70 90
command[check_RetentionServer_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [R]etentionServer.js 70 90
command[check_RTMEventGenerator_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [R]TMEventGenerator.js 70 90
command[check_RTMEventGenerator_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [R]TMEventGenerator.js 70 90
command[check_RTMServer_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [R]TMServer.js 70 90
command[check_RTMServer_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [R]TMServer.js 70 90
command[check_schedulerserver_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [S]chedulerServer.js 70 90
command[check_schedulerserver_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [S]chedulerServer.js 70 90
command[check_ServiceEngine_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [S]erviceEngine.js 70 90
command[check_ServiceEngine_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [S]erviceEngine.js 70 90
command[check_SyncEmail_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [S]yncEmails.js 70 90
command[check_SyncEmail_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [S]yncEmails.js 70 90
command[check_SyncServer_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [S]yncServer.js 70 90
command[check_SyncServer_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [S]yncServer.js 70 90
command[check_SyncServerProcessors_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [S]yncServerProcessors.js 70 90
command[check_SyncServerProcessors_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [S]yncServerProcessors.js 70 90
command[check_WebhookListner_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [W]ebhookListner.js 70 90
command[check_WebhookListner_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [W]ebhookListner.js 70 90
command[check_WorkFlowAppServer_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [W]orkFlowAppServer.js 70 90
command[check_WorkFlowAppServer_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [W]orkFlowAppServer.js 70 90
command[check_WorkflowScheduler_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [W]orkFlowScheduler.js 70 90
command[check_WorkflowScheduler_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [W]orkFlowScheduler.js 70 90
command[check_WorkFlowServiceEngine_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [W]orkFlowServiceEngine.js 70 90
command[check_WorkFlowServiceEngine_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [W]orkFlowServiceEngine.js 70 90
command[check_WorkflowServiceEngine_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [W]orkFlowServiceEngine.js 70 90
command[check_WorkflowServiceEngine_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [W]orkFlowServiceEngine.js 70 90
command[check_DataArchiveServer_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [D]ataArchiveServer.js 70 90
command[check_DataArchiveServer_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [D]ataArchiveServer.js 70 90
command[check_BotSlackService_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [B]otSlackService.js 70 90
command[check_BotSlackService_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [B]otSlackService.js 70 90
command[check_BotRTMJobServer_mem]=sudo /usr/lib64/nagios/plugins/check_mem_process [B]otRTMJobServer.js 70 90
command[check_BotRTMJobServer_cpu]=sudo /usr/lib64/nagios/plugins/check_cpu_process [B]otRTMJobServer.js 70 90

##################################################################################################################
#

# The following examples allow user-supplied arguments and can
# only be used if the NRPE daemon was compiled with support for
# command arguments *AND* the dont_blame_nrpe directive in this
# config file is set to '1'.  This poses a potential security risk, so
# make sure you read the SECURITY file before doing this.

#command[check_users]=/usr/local/nagios/libexec/check_users -w $ARG1$ -c $ARG2$
#command[check_load]=/usr/local/nagios/libexec/check_load -w $ARG1$ -c $ARG2$
#command[check_disk]=/usr/local/nagios/libexec/check_disk -w $ARG1$ -c $ARG2$ -p $ARG3$
#command[check_procs]=/usr/local/nagios/libexec/check_procs -w $ARG1$ -c $ARG2$ -s $ARG3$

